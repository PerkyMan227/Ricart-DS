syntax = "proto3";

package mutex;

option go_package = "./mutexpb";

import "google/protobuf/empty.proto";

service DistributedMutex {

    // Request to access critical state
    rpc RequestAccess(Request) returns (google.protobuf.Empty);
    // Grants permission (reply) to a requesting node
    rpc GrantPermission(Reply) returns (google.protobuf.Empty);
}

message Request {
    int64 timestamp = 1; // lamport clock timestamp
    int32 node_id = 2; // ID of requesting node
}
message Reply {
    int32 node_id = 1; // ID of responding node
}